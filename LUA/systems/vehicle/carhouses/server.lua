----------------------------------------------------
----------------------------------------------------
------ Copyright (c) 2014-2018 FirstOne Media ------
----------------------------------------------------
------ Commercial use or Copyright removal is ------
------ strictly prohibited without permission ------
----------------------------------------------------
----------------------------------------------------


Carhouses = {
	{
		name			= "SHODY Used Autos",
		pos				= {1689.95, 1849.4, 9.9, 0.0}, -- LV, Airport
		sellMarkerPos	= {1743.2, 1855, 9.9, 0.0},
		usedCars		= true, -- Definiert, ob gebrauchtwagenhändler oder nicht
		carSpawnPos		= {1753, 1869, 11.5, 90},
		logo			= "files/images/productlist/shody.png",
		
		cars	= {
			{
				pos		= {1730, 1886, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1891, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1896, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1901, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1906, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1911, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1916, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1921, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1926, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1931, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1936, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1941, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1946, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1951, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1956, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1961, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1966, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1971, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1976, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1981, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1986, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1991, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 1996, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 2001, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 2006, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 2011, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 2016, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1730, 2021, 11.5, 90},
				id		= nil,
				price	= nil,
			},
			
			--
			
			{
				pos		= {1743, 2021, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 2016, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 2011, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 2006, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 2001, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1996, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1991, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1986, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1981, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1976, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1971, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1966, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1961, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1956, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1951, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1946, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1941, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1936, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1931, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1926, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1921, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1916, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1911, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1906, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1901, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1896, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1891, 11.5, 270},
				id		= nil,
				price	= nil,
			},
			{
				pos		= {1743, 1886, 11.5, 270},
				id		= nil,
				price	= nil,
			},
		}
	},
	
	
	
	{
		name			= "LS Boats",
		pos				= {942.4, -1884.5, 5.95, 0.0}, -- LV, Airport
		usedCars		= false, -- Definiert, ob gebrauchtwagenhändler oder nicht
		carSpawnPos		= {890, -2033.6, 0, 180},
		logo			= "files/images/productlist/boat.png",
		
		cars	= {
			{
				pos		= {906, -1932.8, 0, 105},
				id		= 484,
				price	= 3000,
			},
			{
				pos		= {909.8, -1942.1, 0, 105},
				id		= 454,
				price	= 3000,
			},
			{
				pos		= {913.7, -1951.2, 0, 105},
				id		= 493,
				price	= 3000,
			},
			{
				pos		= {928.4, -1906.5, 0, 105},
				id		= 446,
				price	= 3000,
			},
			{
				pos		= {931.1, -1916.2, 0, 105},
				id		= 452,
				price	= 3000,
			},
			{
				pos		= {935.4, -1924.1, 0, 105},
				id		= 473,
				price	= 3000,
			},
			
		}
	},
	
	{
		name			= "Coutt and Schutz",
		pos				= {2135.7, -1159.1, 23.15, 0}, -- LV, Airport
		usedCars		= false, -- Definiert, ob gebrauchtwagenhändler oder nicht
		carSpawnPos		= {2126.6, -1124.7, 25.9, 340},
		logo			= "files/images/productlist/coutt.png",
		
		cars	= {
			{
				pos		= {2136.7, -1164.4, 23.7, 40},
				id		= 462,
				price	= 3000,
			},
			{
				pos		= {2136.8, -1169.3, 23.7, 40},
				id		= 509,
				price	= 3000,
			},
			
			{
				pos		= {2136.9, -1173.7, 23.7, 40},
				id		= 481,
				price	= 3000,
			},
			{
				pos		= {2137, -1178.5, 23.7, 30},
				id		= 510,
				price	= 3000,
			},
			{
				pos		= {2134.2, -1184.0, 23.7, 290},
				id		= 522,
				price	= 3000,
			},
			{
				pos		= {2129.0, -1184.0, 23.7, 290},
				id		= 463,
				price	= 3000,
			},
			{
				pos		= {2127.2, -1174.0, 23.7, 300},
				id		= 581,
				price	= 3000,
			},
			{
				pos		= {2127.3, -1170.7, 23.7, 300},
				id		= 461,
				price	= 3000,
			},
			{
				pos		= {2127.4, -1167.7, 23.7, 300},
				id		= 521,
				price	= 3000,
			},
			{
				pos		= {2127.4, -1164.1, 23.7, 300},
				id		= 586,
				price	= 3000,
			},
			{
				pos		= {2127.2, -1161.0, 23.7, 300},
				id		= 468,
				price	= 3000,
			},
			{
				pos		= {2127.1, -1158.1, 23.7, 300},
				id		= 471,
				price	= 3000,
			},
			
			
			{
				pos		= {2135.5, -1145.2, 24.6, 56},
				id		= 518,
				price	= 3000,
			},
			{
				pos		= {2135.9, -1138.1, 25.4, 110},
				id		= 467,
				price	= 3000,
			},
			{
				pos		= {2135.8, -1131.2, 25.5, 80},
				id		= 404,
				price	= 3000,
			},
			{
				pos		= {2135.4, -1126.6, 25.4, 93},
				id		= 479,
				price	= 3000,
			},
			{
				pos		= {2119.2, -1124.6, 25.5, 320},
				id		= 413,
				price	= 3000,
			},
			{
				pos		= {2119.2, -1132.5, 25.1, 325},
				id		= 542,
				price	= 3000,
			},
			{
				pos		= {2118.4, -1140.5, 24.8, 320},
				id		= 549,
				price	= 3000,
			},
			{
				pos		= {2118.1, -1149.7, 24.2, 317},
				id		= 466,
				price	= 3000,
			},
		}
	},
	
	{
		name			= "Grotti",
		pos				= {550.8, -1294.1, 16.3, 0}, -- LV, Airport
		usedCars		= false, -- Definiert, ob gebrauchtwagenhändler oder nicht
		carSpawnPos		= {562.7, -1269.5, 17.6, 20},
		logo			= "files/images/productlist/grotti.png",
		
		cars	= {
			{
				pos		= {563.3, -1297.6, 17.1, 30},
				id		= 411,
				price	= 3000,
			},
			{
				pos		= {557.3, -1297.0, 17.0, 33},
				id		= 451,
				price	= 3000,
			},
			{
				pos		= {535.6, -1294.4, 17.0, 235},
				id		= 506,
				price	= 3000,
			},
			{
				pos		= {531.2, -1299.3, 16.8, 330},
				id		= 541,
				price	= 3000,
			},
			{
				pos		= {521.7, -1300.1, 17.1, 325},
				id		= 415,
				price	= 3000,
			},
			{
				pos		= {525.3, -1293.5, 17, 250},
				id		= 429,
				price	= 3000,
			},
			
			{
				pos		= {558.1, -1298.8, 27.5, 160},
				id		= 602,
				price	= 3000,
			},
			{
				pos		= {563.3, -1308.4, 27.4, 35},
				id		= 555,
				price	= 3000,
			},
			{
				pos		= {553.1, -1307.7, 27.4, 310},
				id		= 560,
				price	= 3000,
			},
			{
				pos		= {538.8, -1307.6, 27.4, 40},
				id		= 480,
				price	= 3000,
			},
			{
				pos		= {528.0, -1308.8, 27.4, 300},
				id		= 533,
				price	= 3000,
			},
			{
				pos		= {527.6, -1299.1, 27.5, 237},
				id		= 580,
				price	= 3000,
			},
			{
				pos		= {540.6, -1298.5, 27.6, 320},
				id		= 421,
				price	= 3000,
			},
		}
	},
	
	
	
	{
		name			= "Autobahn",
		pos				= {2196, 1391.5, 9.9, 0}, -- LV, Airport
		usedCars		= false, -- Definiert, ob gebrauchtwagenhändler oder nicht
		carSpawnPos		= {2219.5, 1386.1, 11, 90},
		logo 			= "files/images/productlist/autobahn.png",
		
		cars	= {
			{
				pos		= {2151.8, 1398.4, 11, 180},
				id		= 418,
				price	= 3000,
			},
			{
				pos		= {2145.5, 1398.3, 11, 180},
				id		= 458,
				price	= 3000,
			},
			{
				pos		= {2139.1, 1398.2, 11, 180},
				id		= 579,
				price	= 3000,
			},
			{
				pos		= {2132.7, 1398.3, 11, 180},
				id		= 561,
				price	= 3000,
			},
			{
				pos		= {2126.4, 1398.3, 11, 180},
				id		= 589,
				price	= 3000,
			},
			{
				pos		= {2116.7, 1398.2, 11, 180},
				id		= 558,
				price	= 3000,
			},
			{
				pos		= {2103.7, 1398.6, 11, 180},
				id		= 496,
				price	= 3000,
			},
			
			{
				pos		= {2103.9, 1409.0, 11, 0},
				id		= 491,
				price	= 3000,
			},
			{
				pos		= {2110.2, 1408.6, 11, 0},
				id		= 436,
				price	= 3000,
			},
			{
				pos		= {2123.2, 1408.8, 11, 0},
				id		= 587,
				price	= 3000,
			},
			{
				pos		= {2129.7, 1408.6, 11, 0},
				id		= 565,
				price	= 3000,
			},
			{
				pos		= {2139.2, 1408.4, 11, 0},
				id		= 559,
				price	= 3000,
			},
			{
				pos		= {2145.5, 1408.6, 11, 0},
				id		= 562,
				price	= 3000,
			},
			{
				pos		= {2151.7, 1408.7, 11, 0},
				id		= 400,
				price	= 3000,
			},
		}
	},

	

	{
		name			= "Truck Terminal Red County",
		pos				= {196.599609375, -232.7001953125, 0.89999997615814, 0}, -- Blueberry
		usedCars		= false, -- Definiert, ob gebrauchtwagenhändler oder nicht
		carSpawnPos		= {225.2998046875, -265.2998046875, 1.5, 180},
		logo			= "files/images/productlist/truck_terminal.png",
		
		cars	= {
			{
				pos		= {195.7998046875, -252.400390625, 1.3999999761581, 197.99560546875},
				id		= 600,
				price	= 3000,
			},
			{
				pos		= {199.7001953125, -252.599609375, 1.7000000476837, 197.99560546875},
				id		= 478,
				price	= 3000,
			},
			{
				pos		= {203.5, -252, 1.5, 195.99060058594},
				id		= 543,
				price	= 3000,
			},
			{
				pos		= {218.7998046875, -254.2001953125, 2, 155.99487304688},
				id		= 508,
				price	= 3000,
			},
			{
				pos		= {218.5, -267.7001953125, 1.7000000476837, 27.24609375},
				id		= 413,
				price	= 3000,
			},
			{
				pos		= {214.400390625, -267.7998046875, 1.7000000476837, 27.998657226563},
				id		= 499,
				price	= 3000,
			},
			{
				pos		= {202.2001953125, -269, 1.6000000238419, 0},
				id		= 531,
				price	= 3000,
			},
			{
				pos		= {199, -268.7998046875, 1.2000000476837, 0},
				id		= 572,
				price	= 3000,
			},
		}
	},
	
	
	
	
	
	{
		name	= "Otto's Autos",
		pos		= {-1646.6, 1206.8, 6.36, 0.0},
		usedCars = false,
		carSpawnPos = {-1637.5, 1209.5, 6.8, 224},
		logo			= "files/images/productlist/ottos.png",
		cars	= {
			{
				pos		= {-1650.8, 1211.1, 6.9, 0},
				id		= 522,
				price	= 7000,
			},
			{
				pos		= {-1655.7, 1216.2, 6.9, 0},
				id		= 581,
				price	= 2300,
			},
			{
				pos		= {-1666, 1209.3, 7.2, 315},
				id		= 402,
				price	= 23500,
			},
			{
				pos		= {-1667.7, 1216.2, 7, 260},
				id		= 429,
				price	= 95000,
			},
			
			{
				pos		= {-1663.4, 1221.1, 13.5, 210},
				id		= 480,
				price	= 82500,
			},
			{
				pos		= {-1650, 1208.8, 13.5, 60},
				id		= 560,
				price	= 17500,
			},
			{
				pos		= {-1665.9, 1207.4, 13.4, 300},
				id		= 558,
				price	= 13000,
			},
			
			{
				pos		= {-1663.9, 1222.3, 21, 200},
				id		= 587,
				price	= 41500,
			},
			{
				pos		= {-1648.9, 1207.2, 20.9, 50},
				id		= 562,
				price	= 35000,
			},
			{
				pos		= {-1657.4, 1205.6, 20.8, 0},
				id		= 565,
				price	= 44500,
			},
			{
				pos		= {-1665.6, 1207.1, 21.1, 330},
				id		= 602,
				price	= 49500,
			},
			
		}
	},
	
	{
		name	= "Wang Cars",
		pos		= {-1945.8, 271.7, 34.5, 0.0},
		usedCars = false,
		carSpawnPos = {-1973, 303, 36, 150},
		colsphereSize = 5,
		logo			= "files/images/productlist/wang.png",
		cars	= {
			{
				pos		= {-1958.3, 303.6, 35.3, 180},
				id		= 401,
				price	= 8000,
			},
			{
				pos		= {-1952.7, 295.9, 35.7, 145},
				id		= 500,
				price	= 20000,
			},
			{
				pos		= {-1962.7, 288, 35.1, 300},
				id		= 462,
				price	= 1050,
			},
			{
				pos		= {-1962.7, 281.4, 35.1, 300},
				id		= 521,
				price	= 5000,
			},
			{
				pos		= {-1962.4, 273.2, 35.1, 300},
				id		= 461,
				price	= 2600,
			},
			{
				pos		= {-1961.4, 257.9, 35.6, 330},
				id		= 579,
				price	= 27000,
			},
			{
				pos		= {-1950.7, 257.2, 35.4, 50},
				id		= 439,
				price	= 20000,
			},
			{
				pos		= {-1954.9, 304.3, 40.8, 180},
				id		= 589,
				price	= 13000,
			},
			{
				pos		= {-1953.2, 291.9, 40.9, 153},
				id		= 475,
				price	= 12000,
			},
			{
				pos		= {-1956.5, 270.8, 40.8, 208},
				id		= 527,
				price	= 6500,
			},
			{
				pos		= {-1955.9, 257.0, 41, 0},
				id		= 517,
				price	= 26000,
			},
			{
				pos		= {-1946.2, 257.3, 40.9, 50},
				id		= 526,
				price	= 16000,
			},
			{
				pos		= {-1948.0, 270.0, 41.0, 120},
				id		= 550,
				price	= 13000,
			},
			
		}
	},
}
local vehPrices = {}

function calculateVehWorth(veh)
	local price = false
	
	if (type(vehPrices[getElementModel(veh)]) == "number") then
		price = vehPrices[getElementModel(veh)]
		local data = getVehData(veh)
		
		local tuningPrices = {}
		for k, v in pairs(tuningUpgrades) do
			for kk, vv in pairs(v.upgrades) do
				tuningPrices[vv.upgradeID] = vv.price
			end
		end
		for slot, id in pairs(fromJSON(data["upgrades"])) do
			if (tonumber(id) ~= nil and id > 999) then
				if (type(tuningPrices[id]) == "number") then
					price = price + tuningPrices[id]
				end
			end
		end
				
		local specialTuningPrices = {}
		for k, v in pairs(specialTuningUpgrades) do
			if (type(v.upgrades) == "table") then
				
				for kk, vv in pairs(v.upgrades) do					
					local sid = nil
					if (type(v.upgradeID) == "string") then
						if (type(specialTuningPrices[v.upgradeID]) ~= "table") then
							specialTuningPrices[v.upgradeID] = {}
						end
						sid = v.upgradeID
					elseif (type(v.upgradeID) ~= "string") then
						if (type(specialTuningPrices[vv.upgradeID]) ~= "table") then
							specialTuningPrices[vv.upgradeID] = {}
						end
						sid = vv.upgradeID
					end
					local uid = vv.upgradeID
					if (uid == "customlights" or uid == "tiefer" or uid == "frontwheelpos" or uid == "rearwheelpos") then
						uid = vv.stufe
					elseif (uid == "hornsound") then
						uid = vv.soundfile
					end
					
					specialTuningPrices[sid][uid] = vv.price
				end
			else
				specialTuningPrices[v.upgradeID] = v.price
			end
		end
		for k, v in pairs(fromJSON(data["specialupgrades"])) do
			if (v ~= 0 and v ~= nil and v ~= false) then
				if (type(specialTuningPrices[k]) == "table") then
					if (type(specialTuningPrices[k][v]) == "number") then
						price = price + specialTuningPrices[k][v]
					end
				elseif (type(specialTuningPrices[k]) == "number") then
					price = price + specialTuningPrices[k]
				end
			end
		end
				
		local performanceTuningPrices = {}
		for k, v in pairs(performanceTuningUpgrades) do
			if (type(v.upgrades) == "table") then
				for kk, vv in pairs(v.upgrades) do
					local sid = nil
					if (type(v.upgradeID) == "string") then
						if (type(performanceTuningPrices[v.upgradeID]) ~= "table") then
							performanceTuningPrices[v.upgradeID] = {}
						end
						sid = v.upgradeID
					elseif (type(v.upgradeID) ~= "string") then
						if (type(performanceTuningPrices[vv.upgradeID]) ~= "table") then
							performanceTuningPrices[vv.upgradeID] = {}
						end
						sid = vv.upgradeID
					end
					
					performanceTuningPrices[sid][vv.upgradeID] = vv.price
				end
			else
				performanceTuningPrices[v.upgradeID] = v.price
			end
		end
		for k, v in pairs(fromJSON(data["performanceupgrades"])) do
			if (v ~= 0 and v ~= nil and v ~= false) then
				if (type(performanceTuningPrices[k]) == "table") then
					if (type(performanceTuningPrices[k][v]) == "number") then
						price = price + performanceTuningPrices[k][v]
					end
				elseif (type(performanceTuningPrices[k]) == "number") then
					price = price + performanceTuningPrices[k]
				end
			end
		end
		
		price = math.ceil(price / 2)
		
		
		local km = data["meters"]/1000
		local multi = math.round((km/1000))
		local perc = 0
		if (multi >= 1) then
			perc = 0.15 * multi -- -0.15% pro 1.000KM
		end
		if (perc > 80) then perc = 80 end
		
		if (perc > 0) then
			price = math.ceil(((price/100)*80))
		end
	end
	
	return price
end

local refillTimer = nil
function refillCarhouses()
	for cID, arr in pairs(Carhouses) do
		if (not arr.usedCars) then
			
			for aID, car in pairs(arr.cars) do
				if (not car.vehicle) then
					local x, y, z, rz = unpack(car.pos)
					car.vehicle = createVehicle(car.id, x, y, z, 0, 0, rz, arr.name)
					setElementData(car.vehicle, "carshopCar", true)
					setElementData(car.vehicle, "cID", cID)
					setElementData(car.vehicle, "aID", aID)
					toggleVehicleRespawn(car.vehicle, false)
					setVehicleDamageProof(car.vehicle, true)
					setVehicleDoorsUndamageable(car.vehicle, true)
					setVehicleLocked(car.vehicle, true)
				end
			end
			
		end
		
	end
end
--addCommandHandler("crf", refillCarhouses)

function createCarhouses()
	local cCount, aCount = 0, 0

	for cID, arr in pairs(Carhouses) do
		local x, y, z, rz = unpack(arr.pos)
		arr.blip	= createBlip(x, y, z, 55, 2, 255, 0, 0, 255, 0, 200, root)
		arr.marker	= createMarker(x, y, z, "cylinder", 1, 255, 0, 0)
		
		addEventHandler("onMarkerHit", arr.marker, function(elem, dim)
			if (dim == true) then
				if (getElementType(elem) == "player") then
					toggleGhostMode(elem, true)
					triggerClientEvent(elem, "carShopHello", elem, arr.cars, arr.name, cID, arr.logo, arr.usedCars)
				end
			end
		end)
		
		if (arr.usedCars) then
			local x, y, z, rz = unpack(arr.sellMarkerPos)
			arr.sellMarker	= createMarker(x, y, z, "cylinder", 4, 255, 100, 0)
			
			addEventHandler("onMarkerHit", arr.sellMarker, function(elem, dim)
				if (dim == true) then
					if (getElementType(elem) == "player") then
						local veh = getPedOccupiedVehicle(elem)
						if (veh) then
							if (getPedOccupiedVehicleSeat(elem) == 0) then
								
								local vID	= getVehID(veh)
								if (vID and Vehicles[vID].data["owner"] == getPlayerName(elem)) then
									
									local price = 0
									toggleGhostMode(veh, true)
									triggerClientEvent(elem, "carSellHello", elem, arr.name, calculateVehWorth(veh), cID)
									
								else
									notificationShow(elem, "error", "Das Fahrzeug gehört dir nicht.")
								end
							end
						else
							notificationShow(elem, "info", "Komm mit deinem Fahrzeug wieder, um es hier zu verkaufen.")
						end
					end
				end
			end)
		end
		
		
		for aID, car in pairs(arr.cars) do
			if (arr.usedCars ~= true) then
				local x, y, z, rz = unpack(car.pos)
				car.vehicle = createVehicle(car.id, x, y, z, 0, 0, rz, arr.name)
				car.title	= getVehicleNameFromModel(car.id)
				setElementData(car.vehicle, "carshopCar", true)
				setElementData(car.vehicle, "cID", cID)
				setElementData(car.vehicle, "aID", aID)
				toggleVehicleRespawn(car.vehicle, false)
				setVehicleDamageProof(car.vehicle, true)
				setVehicleDoorsUndamageable(car.vehicle, true)
				setVehicleLocked(car.vehicle, true)
				setTimer (function()
					setElementFrozen(car.vehicle, true)
				end, 5000, 1)
				setTimer (function()
					setElementFrozen(car.vehicle, false)
				end, 10000, 1)
				setTimer (function()
					setElementFrozen(car.vehicle, true)
				end, 15000, 1)
				
				vehPrices[car.id] = car.price
				
				aCount = aCount + 1
			end
		end
		
		cCount = cCount + 1
	end
	
	refillTimer = setTimer(refillCarhouses, 15*60000, 0)
	outputDebugString("[Systems->Vehicle->Carhouses->createCarhouses()]: Created "..aCount.." vehicles from "..cCount.." carshops.")
end
addEventHandler("onResourceStart", resourceRoot, createCarhouses, true, "low-5")

local function sellVehicle(shopID)
	local veh = getPedOccupiedVehicle(source)
	if (veh) then
		local vID	= getVehID(veh)
		if (vID and Vehicles[vID].data["owner"] == getPlayerName(source)) then
			local price = calculateVehWorth(veh)
			if (price) then
				local place = nil
				for i = 1, 100 do
					local rnd = math.random(1, #Carhouses[shopID].cars)
					if (Carhouses[shopID].cars[rnd].id == nil) then
						place = rnd
					end
				end
				
				if (place ~= nil) then
					removePedFromVehicle(source)
					Vehicles[vID].data["owner"] = "carshop-"..shopID
					local x, y, z, rz = unpack(Carhouses[shopID].cars[place].pos)
					Vehicles[vID].data["position"] = toJSON({5000, 5000, 5, 0, 0, 0})
					saveVehicle(veh)
					respawnVeh(veh)
					givePlayerMoney(source, price, Carhouses[shopID].name)
					
					notificationShow(source, "success", "Du hast dein Fahrzeug erfolgreich verkauft.")
					
				else
					notificationShow(source, "error", "Wir können momentan leider keine Fahrzeuge ankaufen.")
				end
			end
		end
	end
end
addEvent("carshopSellVehicle", true)
addEventHandler("carshopSellVehicle", root, sellVehicle)

local function buyVehicle(cID, aID)
	local player = source
	local vData = Carhouses[cID].cars[aID]
	
	if (getPlayerMoney(player) >= vData.price) then
		
		if (vData.vehicle ~= nil and isElement(vData.vehicle)) then
			
			local px, py, pz = getElementPosition(player)
			local ax, ay, az = getElementPosition(vData.vehicle)
			
			local x, y, z, rz = unpack(Carhouses[cID].carSpawnPos)
			local c1, c2, c3, c4 = getVehicleColor(vData.vehicle)
			
			local veh = nil
			if (Carhouses[cID].usedCars) then
				local vID = getVehID(vData.vehicle)
				Vehicles[vID].data["owner"] = getPlayerName(source)
				Vehicles[vID].data["position"] = toJSON({x, y, z, 0, 0, rz})
				saveVehicle(vData.vehicle)
				respawnVeh(vData.vehicle)
				
				veh = Vehicles[vID].vehicle
				
				Carhouses[cID].cars[aID].id = nil
				Carhouses[cID].cars[aID].price = nil
				Carhouses[cID].cars[aID].title = nil
				
			else
				veh = createNewVehicle(player, vData.id, x, y, z, rz, {getVehicleColor(vData.vehicle, true)})
			end
			
			if (veh) then
				destroyElement(vData.vehicle)
				Carhouses[cID].cars[aID].vehicle = nil
				
				warpPedIntoVehicle(player, veh)
				toggleGhostMode(veh, true, 12500)
				takePlayerMoney(player, vData.price, Carhouses[cID].name)
				infoShow(player, "info", "Parke dein Fahrzeug mit /park andernfalls wird es abgeschleppt.")
			else
				notificationShow(player, "error", "Es ist ein Fehler aufgetreten, bitte wende dich an einen Administrator.")
			end
		
		else
			local fix = ""
			if (not Carhouses[cID].usedCars) then
				local left, _, _ = getTimerDetails(refillTimer)
				local time = getRealTime(getRealTime().timestamp + (left / 1000))
				fix = "\nDie nächste Lieferung kommt um "..time.hour..":"..(time.minute).." Uhr."
			end
			notificationShow(player, "error", "Dieses Fahrzeug wurde bereits verkauft."..fix)
		end
	else
		notificationShow(player, "error", "Du hast nicht genug Geld.\nDieses Fahrzeug kostet "..vData.price.." $.")
	end
end
addEvent("carshopBuyVehicle", true)
addEventHandler("carshopBuyVehicle", root, buyVehicle)


-- Grotti Aufzug

local keypads = {
	[1] = createObject(2886,545.7000100,-1300.6000000,17.8000000,0.0000000,0.0000000,182.0000000), --object(sec_keypad) (1)
	[2] = createObject(2886,546.5000000,-1300.2000000,28.1000000,0.0000000,0.0000000,182.0000000), --object(sec_keypad) (2)
	[3] = createObject(2886,546.7000100,-1302.9000000,28.0000000,0.0000000,0.0000000,182.0000000), --object(sec_keypad) (3)
}

--#TODO keypad click toggle door

local elevatorDoor1 = createObject (3089, 546.2001953125, -1300.7001953125, 17.60000038147, 0, 0, 0)
local elevatorDoor1_up = createMarker (547.09997558594, -1300.0999755859, 16.5, 'cylinder', 1.0, 0, 0, 200, 0)
addEventHandler("onMarkerHit", elevatorDoor1_up, function(elem, dim)
if (dim == true) then
	if (getElementType(elem) == "player") then
		if (getElementData (elem, "inElevator") == false) then
			moveObject (elevatorDoor1, 3000, 546.2001953125, -1300.7001953125, 14.89999961853, 0, 0, 0)
				setTimer (function()
					moveObject (elevatorDoor1, 3000, 546.2001953125, -1300.7001953125, 17.60000038147, 0, 0, 0)
				end, 4000, 1)
			elseif (getElementData (elem, "inElevator") == true) then
				moveObject (elevatorDoor1, 3000, 546.2001953125, -1300.7001953125, 17.60000038147, 0, 0, 0)
				setElementData (elem, "inElevator", false)
			end
		end
	end
end)

local elevatorDoor2 = createObject (3089, 546.86999511719, -1300.3000488281, 27.89999961853, 0, 0, 0)
local elevatorDoor2_down = createMarker (547.59997558594, -1299.5, 26.80000038147, 'cylinder', 1.0, 0, 0, 200, 0)
addEventHandler("onMarkerHit", elevatorDoor2_down, function(elem, dim)
if (dim == true) then
	if (getElementType(elem) == "player") then
		if (getElementData (elem, "inElevator") == false) then
			moveObject (elevatorDoor2, 3000, 546.86999511719, -1300.3000488281, 24.89999961853, 0, 0, 0)
				setTimer (function()
					moveObject (elevatorDoor2, 3000, 546.86999511719, -1300.3000488281, 27.89999961853, 0, 0, 0)
				end, 4000, 1)
			elseif (getElementData (elem, "inElevator") == true) then
				moveObject (elevatorDoor2, 3000, 546.86999511719, -1300.3000488281, 27.89999961853, 0, 0, 0)
				setElementData (elem, "inElevator", false)
			end
		end
	end
end)

local colUp = createColSphere (546.94, -1302.35, 17.31, 1.5)
addEventHandler ("onColShapeHit", colUp, function(elem, dim)
if (dim == true) then
	if (getElementType(elem) == "player") then
		if (getElementData (elem, "inElevator") == false) then
		infoShow(elem, "info2", "[Aufzug]: Bitte warten...")
		setElementData (elem, "inElevator", true)
			setTimer (function()
				fadeElementInterior(elem, 0, 547.72, -1301.71, 27.68, 0, 0)
			end, 3000, 1)
			setTimer (function()
				local x, y, z = getElementPosition(elem)
					moveObject (elevatorDoor2, 3000, 546.86999511719, -1300.3000488281, 24.89999961853, 0, 0, 0)
					infoShow(elem, "info2", "[Aufzug]: Bitte aussteigen...")
					triggerClientEvent(root, "playSound3D", root, "elevatorBing", x, y, z, false)
				end, 5000, 1)
			end
		end
	end
end)

local colDown = createColSphere (547.76, -1301.64, 27.7, 1.5)
addEventHandler ("onColShapeHit", colDown, function(elem, dim)
if (dim == true) then
	if (getElementType(elem) == "player") then
		if (getElementData (elem, "inElevator") == false) then
		infoShow(elem, "info2", "[Aufzug]: Bitte warten...")
		setElementData (elem, "inElevator", true)
			setTimer (function()
				fadeElementInterior(elem, 0, 546.94, -1302.35, 17.31, 0, 0)
			end, 3000, 1)
			setTimer (function()
				local x, y, z = getElementPosition(elem)
					moveObject (elevatorDoor1, 3000, 546.2001953125, -1300.7001953125, 14.89999961853, 0, 0, 0)
					infoShow(elem, "info2", "[Aufzug]: Bitte aussteigen...")
					triggerClientEvent(root, "playSound3D", root, "elevatorBing", x, y, z, false)
				end, 5000, 1)
			end
		end
	end
end)