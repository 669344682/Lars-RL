----------------------------------------------------
----------------------------------------------------
------ Copyright (c) 2014-2018 FirstOne Media ------
----------------------------------------------------
------ Commercial use or Copyright removal is ------
------ strictly prohibited without permission ------
----------------------------------------------------
----------------------------------------------------
vehSpeeds={
[400] = {maxSpeed = 167.30798431523, nullHundert = 3436},
[401] = {maxSpeed = 155.74779918737, nullHundert = 4469},
[402] = {maxSpeed = 197.66809999116, nullHundert = 2543},
[403] = {maxSpeed = 116.36386706448, nullHundert = 6329},
[404] = {maxSpeed = 140.75763986149, nullHundert = 5792},
[405] = {maxSpeed = 173.69095439488, nullHundert = 3161},
[406] = {maxSpeed = 116.98416852568, nullHundert = 5175},
[407] = {maxSpeed = 157.15510465133, nullHundert = 3468},
[408] = {maxSpeed = 105.9199508094, nullHundert = 8467},
[409] = {maxSpeed = 167.48654606757, nullHundert = 3790},
[410] = {maxSpeed = 137.49270387055, nullHundert = 5391},
[411] = {maxSpeed = 234.87387223455, nullHundert = 2115},
[412] = {maxSpeed = 178.76051527021, nullHundert = 3068},
[413] = {maxSpeed = 116.80814667917, nullHundert = 7978},
[414] = {maxSpeed = 111.9824791347, nullHundert = 8022},
[415] = {maxSpeed = 203.78863479976, nullHundert = 2331},
[416] = {maxSpeed = 163.26070837935, nullHundert = 3438},
[418] = {maxSpeed = 122.39688234533, nullHundert = 7961},
[419] = {maxSpeed = 158.06735853522, nullHundert = 4437},
[420] = {maxSpeed = 153.75958947601, nullHundert = 4562},
[421] = {maxSpeed = 162.9569928213, nullHundert = 3871},
[422] = {maxSpeed = 148.42838225079, nullHundert = 4776},
[423] = {maxSpeed = 104.57069193327, nullHundert = 12484},
[424] = {maxSpeed = 143.44821015494, nullHundert = 3223},
[426] = {maxSpeed = 183.82898011108, nullHundert = 3300},
[427] = {maxSpeed = 175.41395769454, nullHundert = 4114},
[428] = {maxSpeed = 166.21251223295, nullHundert = 5959},
[429] = {maxSpeed = 213.85674899116, nullHundert = 2277},
[431] = {maxSpeed = 138.17849906641, nullHundert = 8231},
[432] = {maxSpeed = 99.99503954796, nullHundert = 0},
[433] = {maxSpeed = 117.09684570841, nullHundert = 7153},
[434] = {maxSpeed = 177.02865129471, nullHundert = 2808},
[436] = {maxSpeed = 158.16873305594, nullHundert = 4505},
[437] = {maxSpeed = 167.24304040011, nullHundert = 4514},
[438] = {maxSpeed = 151.26927993042, nullHundert = 3654},
[439] = {maxSpeed = 178.82052405987, nullHundert = 3193},
[440] = {maxSpeed = 144.33572743843, nullHundert = 5486},
[441] = {maxSpeed = 80.03073668042, nullHundert = 0},
[442] = {maxSpeed = 147.66755769581, nullHundert = 5823},
[443] = {maxSpeed = 133.8333445324, nullHundert = 7342},
[444] = {maxSpeed = 117.30123597427, nullHundert = 3146},
[445] = {maxSpeed = 173.67553155518, nullHundert = 3591},
[448] = {maxSpeed = 117.11373361369, nullHundert = 9271},
[451] = {maxSpeed = 205.05981975899, nullHundert = 1862},
[455] = {maxSpeed = 167.06996546882, nullHundert = 5871},
[456] = {maxSpeed = 112.19455446382, nullHundert = 9875},
[457] = {maxSpeed = 100.76993624602, nullHundert = 11131},
[458] = {maxSpeed = 166.75889108282, nullHundert = 4038},
[459] = {maxSpeed = 144.31463282982, nullHundert = 5506},
[461] = {maxSpeed = 167.68444754571, nullHundert = 2702},
[462] = {maxSpeed = 117.11511112913, nullHundert = 9276},
[463] = {maxSpeed = 149.76889407837, nullHundert = 4099},
[466] = {maxSpeed = 155.91407724665, nullHundert = 3862},
[467] = {maxSpeed = 148.88676716911, nullHundert = 5394},
[468] = {maxSpeed = 151.38670564407, nullHundert = 3038},
[470] = {maxSpeed = 166.30200616869, nullHundert = 3652},
[471] = {maxSpeed = 116.89679556111, nullHundert = 4213},
[474] = {maxSpeed = 158.07814705192, nullHundert = 3925},
[475] = {maxSpeed = 183.36887671044, nullHundert = 2869},
[477] = {maxSpeed = 197.80088813258, nullHundert = 2530},
[478] = {maxSpeed = 124.69127134199, nullHundert = 7841},
[479] = {maxSpeed = 148.37879138835, nullHundert = 4837},
[480] = {maxSpeed = 195.3807350916, nullHundert = 2439},
[482] = {maxSpeed = 166.0632048168, nullHundert = 3672},
[483] = {maxSpeed = 130.04162822937, nullHundert = 7023},
[485] = {maxSpeed = 105.38084267633, nullHundert = 8315},
[486] = {maxSpeed = 67.992553037119, nullHundert = 0},
[489] = {maxSpeed = 147.92698715995, nullHundert = 4344},
[490] = {maxSpeed = 166.27902065465, nullHundert = 3424},
[491] = {maxSpeed = 158.07895592002, nullHundert = 4805},
[492] = {maxSpeed = 148.92505271788, nullHundert = 3938},
[494] = {maxSpeed = 227.67713003823, nullHundert = 2314},
[495] = {maxSpeed = 187.02056500213, nullHundert = 2621},
[496] = {maxSpeed = 172.47742721295, nullHundert = 3104},
[498] = {maxSpeed = 114.23921929375, nullHundert = 14716},
[499] = {maxSpeed = 130.29745912697, nullHundert = 6452},
[500] = {maxSpeed = 149.15392653911, nullHundert = 4053},
[502] = {maxSpeed = 227.70741178939, nullHundert = 2320},
[503] = {maxSpeed = 227.68880953801, nullHundert = 2299},
[504] = {maxSpeed = 183.36847044508, nullHundert = 2899},
[505] = {maxSpeed = 147.9246196973, nullHundert = 4331},
[506] = {maxSpeed = 189.9919616436, nullHundert = 2622},
[507] = {maxSpeed = 175.9218637433, nullHundert = 3762},
[508] = {maxSpeed = 114.23431508916, nullHundert = 8791},
[514] = {maxSpeed = 127.59084587485, nullHundert = 3931},
[515] = {maxSpeed = 150.76871716346, nullHundert = 3960},
[516] = {maxSpeed = 166.75498372455, nullHundert = 4067},
[517] = {maxSpeed = 166.82273118952, nullHundert = 3655},
[518] = {maxSpeed = 174.18463106795, nullHundert = 3745},
[521] = {maxSpeed = 167.68105469422, nullHundert = 2714},
[522] = {maxSpeed = 183.866516243, nullHundert = 1870},
[523] = {maxSpeed = 158.95894221917, nullHundert = 2825},
[524] = {maxSpeed = 137.97634277028, nullHundert = 5007},
[525] = {maxSpeed = 170.20113509613, nullHundert = 3877},
[526] = {maxSpeed = 167.34411770202, nullHundert = 3984},
[527] = {maxSpeed = 158.25743121096, nullHundert = 3481},
[528] = {maxSpeed = 187.02664722925, nullHundert = 3394},
[529] = {maxSpeed = 158.0758257691, nullHundert = 4793},
[530] = {maxSpeed = 63.86917129186, nullHundert = 0},
[531] = {maxSpeed = 74.507330156596, nullHundert = 0},
[532] = {maxSpeed = 116.76183847383, nullHundert = 9249},
[533] = {maxSpeed = 177.11994223601, nullHundert = 3239},
[534] = {maxSpeed = 178.79714003162, nullHundert = 3055},
[535] = {maxSpeed = 167.49554325078, nullHundert = 2468},
[536] = {maxSpeed = 183.37737668167, nullHundert = 2899},
[540] = {maxSpeed = 158.07479976676, nullHundert = 4331},
[541] = {maxSpeed = 215.24224337683, nullHundert = 2316},
[542] = {maxSpeed = 174.18836965093, nullHundert = 3208},
[543] = {maxSpeed = 159.9433129241, nullHundert = 3823},
[544] = {maxSpeed = 157.20754879583, nullHundert = 3454},
[545] = {maxSpeed = 155.85163492669, nullHundert = 3992},
[546] = {maxSpeed = 158.07125906297, nullHundert = 4685},
[547] = {maxSpeed = 151.20526563827, nullHundert = 4747},
[549] = {maxSpeed = 162.71870015202, nullHundert = 3730},
[550] = {maxSpeed = 153.4815699067, nullHundert = 3883},
[551] = {maxSpeed = 166.77340152318, nullHundert = 3161},
[552] = {maxSpeed = 128.29073433179, nullHundert = 6038},
[554] = {maxSpeed = 152.5592090238, nullHundert = 4007},
[555] = {maxSpeed = 167.6189148985, nullHundert = 3253},
[556] = {maxSpeed = 117.18315607313, nullHundert = 3144},
[557] = {maxSpeed = 117.19211566615, nullHundert = 3146},
[558] = {maxSpeed = 165.48197964714, nullHundert = 3022},
[559] = {maxSpeed = 188.48454257272, nullHundert = 2993},
[560] = {maxSpeed = 179.31726494369, nullHundert = 2145},
[561] = {maxSpeed = 163.20073507403, nullHundert = 4083},
[562] = {maxSpeed = 188.48933391039, nullHundert = 2376},
[564] = {maxSpeed = 93.566584169695, nullHundert = 0},
[565] = {maxSpeed = 174.69012857329, nullHundert = 2731},
[566] = {maxSpeed = 169.60317955294, nullHundert = 3237},
[567] = {maxSpeed = 183.36177808614, nullHundert = 2898},
[568] = {maxSpeed = 154.91968987394, nullHundert = 2575},
[571] = {maxSpeed = 98.733231333039, nullHundert = 0},
[572] = {maxSpeed = 63.796283727098, nullHundert = 0},
[573] = {maxSpeed = 117.1062549343, nullHundert = 3599},
[574] = {maxSpeed = 63.870654111152, nullHundert = 0},
[575] = {maxSpeed = 167.30060805402, nullHundert = 3962},
[576] = {maxSpeed = 167.27310269272, nullHundert = 4009},
[578] = {maxSpeed = 138.04719275194, nullHundert = 5267},
[579] = {maxSpeed = 167.30573851371, nullHundert = 3750},
[580] = {maxSpeed = 162.21336779146, nullHundert = 3653},
[581] = {maxSpeed = 158.95572168142, nullHundert = 2870},
[582] = {maxSpeed = 144.28981407857, nullHundert = 5610},
[583] = {maxSpeed = 90.584243211945, nullHundert = 0},
[585] = {maxSpeed = 162.17770132308, nullHundert = 4359},
[586] = {maxSpeed = 149.77726180245, nullHundert = 3959},
[587] = {maxSpeed = 174.71614275575, nullHundert = 2998},
[588] = {maxSpeed = 114.25895468298, nullHundert = 8745},
[589] = {maxSpeed = 172.47276151817, nullHundert = 3020},
[594] = {maxSpeed = 64.274512299658, nullHundert = 0},
[596] = {maxSpeed = 186.17056554165, nullHundert = 3084},
[597] = {maxSpeed = 186.1692784641, nullHundert = 3120},
[598] = {maxSpeed = 186.23614035221, nullHundert = 3143},
[599] = {maxSpeed = 167.48408377652, nullHundert = 2943},
[600] = {maxSpeed = 159.98081752912, nullHundert = 3797},
[601] = {maxSpeed = 116.98253960503, nullHundert = 5606},
[602] = {maxSpeed = 179.26642030016, nullHundert = 3257},
[603] = {maxSpeed = 181.58902252755, nullHundert = 3032},
[604] = {maxSpeed = 155.81335591405, nullHundert = 3868},
[605] = {maxSpeed = 159.94361590319, nullHundert = 3821},
[609] = {maxSpeed = 114.228, nullHundert = 8714},


[430] = {maxSpeed = 194.27978397943, nullHundert = 2898},
[446] = {maxSpeed = 240.37115024893, nullHundert = 1514},
[452] = {maxSpeed = 192.21629765669, nullHundert = 1852},
[453] = {maxSpeed = 57.672918191438, nullHundert = 0},
[454] = {maxSpeed = 137.58134098275, nullHundert = 3098},
[472] = {maxSpeed = 134.71157406116, nullHundert = 3668},
[473] = {maxSpeed = 113.31610250546, nullHundert = 5822},
[484] = {maxSpeed = 65.845652857668, nullHundert = 0},
[493] = {maxSpeed = 192.9086419432, nullHundert = 1406},
[595] = {maxSpeed = 116.83242551983, nullHundert = 4407},


[460] = {maxSpeed = 123.05403715521, nullHundert = 2962},
[464] = {maxSpeed = 46.31682341178, nullHundert = 0},
[476] = {maxSpeed = 155.15733588695, nullHundert = 4654},
[511] = {maxSpeed = 137.99904442014, nullHundert = 2486},
[512] = {maxSpeed = 119.49033593965, nullHundert = 3609},
[513] = {maxSpeed = 156.4461527531, nullHundert = 2122},
[519] = {maxSpeed = 186.63214347765, nullHundert = 2932},
[520] = {maxSpeed = 178.16664800243, nullHundert = 1368},
[539] = {maxSpeed = 105.77349653229, nullHundert = 6069},
[553] = {maxSpeed = 143.49334839986, nullHundert = 5808},
[577] = {maxSpeed = 209.33284319418, nullHundert = 4043},
[592] = {maxSpeed = 210.708, nullHundert = 4040},
[593] = {maxSpeed = 145.240, nullHundert = 3022},
}




local currentCarshop	= 0
local currentVehicle	= 1
local vehicleTable		= {}
local tunings			= {}
local usedCars			= false
local firstSwitch		= true
local moveTimer			= nil
local function carShopSwitch(nr)
	currentVehicle = nr
	
	local cType = getVehicleType(vehicleTable[currentVehicle].id)
	local cX, cY, cZ, crZ = unpack(vehicleTable[currentVehicle].pos)
	local aX, aY, aZ = 0, 0, 0
	if (crZ >= 270) then
		aX, aY, aZ = cX+4, cY+4, cZ+3
	elseif (crZ >= 180) then
		aX, aY, aZ = cX+4, cY-4, cZ+3
	elseif (crZ >= 90) then
		aX, aY, aZ = cX-4, cY+4, cZ+3
	elseif (crZ >= 0) then
		aX, aY, aZ = cX-4, cY-4, cZ+3
	end
	if (cType == "Plane" or cType == "Helicopter" or cType == "Boat") then
		aZ = aZ+15
		if (aX > cX) then aX=aX+4 else aX=aX-4 end
		if (aY > cY) then aY=aY+4 else aY=aY-4 end
	end
	
	
	if (usedCars) then
		tunings["special"]		= fromJSON(vehicleTable[currentVehicle].data["specialupgrades"])
		tunings["performance"]	= fromJSON(vehicleTable[currentVehicle].data["performanceupgrades"])
	end
	
	--freezeProductList(1600)
	
	if (firstSwitch) then
		setCameraMatrix(aX, aY, aZ, cX, cY, cZ)
		firstSwitch = false
	else
		killTimer(moveTimer)
		moveTimer = setTimer(function()
			local mx, my, mz, mx1, my1, mz1 = getCameraMatrix()
			smoothMoveCamera(mx, my, mz, mx1, my1, mz1, aX, aY, aZ, cX, cY, cZ)
		end, 200, 1)
	end
	--[[fadeCamera(false, 1, 0, 0, 0)
	setTimer(function()
		setCameraMatrix(aX, aY, aZ, cX, cY, cZ)
		fadeCamera(true)
	end, 1000, 1)]]
end

local FONT = dxCreateFont("files/fonts/chalet.ttf", 24, false, "antialiased")
local function renderInfos()
	local sX, sY, eX, eY, w, h = productListOffsets()
	
	if (usedCars) then
		dxDrawRectangle(sX, eY+2, w, 193, tocolor(0, 0, 0, 200))
		
		local rand = 5
		local entries = {
			{"Motor",		tunings["performance"]["motor"]},
			{"Traktion",	tunings["performance"]["traktion"]},
			{"Nitro", 		tunings["performance"]["nitro"]},
			{"Gewichtsr.",	tunings["performance"]["weight"]},
			{"Reifentyp",	tunings["performance"]["offroad"]},
			{"Antriebstyp",	tunings["performance"]["antrieb"]},
			{"Lenkwinkel",	tunings["performance"]["lenkung"]},
			{"Kilometer",	setDotsInNumber(math.round((vehicleTable[currentVehicle].data["meters"]/1000)))},
		}
		for k, v in ipairs(entries) do
			dxDrawText(v[1]..":", sX+10, eY+2+rand+(23*(k-1)), sX+w-7, eY+2+rand+30, tocolor(255, 255, 255), 0.5, FONT, "left", "top")
			if (v[2] == "street") then
				v[2] = "Street"
			elseif (v[2] == "pro") then
				v[2] = "Pro"
			elseif (v[2] == "extreme") then
				v[2] = "Extreme"
			elseif (v[2] == "heck") then
				v[2] = "Heck"
			elseif (v[2] == "front") then
				v[2] = "Front"
			elseif (v[2] == "allrad") then
				v[2] = "Allrad"
			elseif (v[2] == "dirt") then
				v[2] = "Dreck"
			elseif (v[2] == "sand") then
				v[2] = "Sand"
			elseif (v[2] == 1010) then
				v[2] = "Extreme"
			elseif (v[2] == 1009) then
				v[2] = "Pro"
			elseif (v[2] == 1008) then
				v[2] = "Street"
			elseif (v[1] == "Lenkwinkel" and tonumber(v[2]) ~= nil) then
				v[2] = v[2].."°"
			elseif (v[1] == "Kilometer") then
				v[2] = v[2]
			else
				v[2] = "✘"
			end
			dxDrawText(v[2], sX+10, eY+2+rand+(23*(k-1)), sX+(w/2), eY+2+rand+30, tocolor(255, 255, 255), 0.5, FONT, "right", "top")
		end
		
		local entries = {"Navi", "Panzer.", "Benziners.", "Nebelw.", "Doppelr.", "Flügelt.", "Tieferl."}
		local entries = {
			{"Navi",		tunings["special"]["gps"]},
			{"Panzerung",	tunings["special"]["armor"]},
			{"Benziners.",	tunings["special"]["fuelsave"]},
			{"Nebelw.",		tunings["special"]["smoker"]},
			{"Doppelr.",	tunings["special"]["doublewheels"]},
			{"Flügelt.",	tunings["special"]["flugelDoors"]},
			{"Tieferl.",	tunings["special"]["tiefer"]},
		}
		for k, v in ipairs(entries) do
			dxDrawText(v[1]..":", sX+(w/2)+14, eY+2+rand+(23*(k-1)), sX+w-10, eY+2+rand+30, tocolor(255, 255, 255), 0.5, FONT, "left", "top")
			
			if (v[1] == "Tieferl.") then
				if (tonumber(v[2]) ~= nil and tonumber(v[2]) > 0) then
					v[2] = "Stufe "..v[2]
				else
					v[2] = "✘"
				end
			elseif (tonumber(v[2]) == 1) then
				v[2] = "✔"
			else
				v[2] = "✘"
			end
			dxDrawText(v[2], sX+(w/2)+14, eY+2+rand+(23*(k-1)), sX+w-10, eY+2+rand+30, tocolor(255, 255, 255), 0.5, FONT, "right", "top")
		end
		
		--dxDrawText("Motor:", sX+17, eY+2+10, sX+w-17, eY+2+10+15, tocolor(255, 255, 255), 0.5, FONT, "left", "center")
		--dxDrawText("Traktion:", sX+17, eY+2+35, sX+w-17, eY+2+10+35, tocolor(255, 255, 255), 0.5, FONT, "left", "center")
		--dxDrawText("Nitro:", sX+17, eY+2+60, sX+w-17, eY+2+10+60, tocolor(255, 255, 255), 0.5, FONT, "left", "center")
		--dxDrawText("Nitro:", sX+17, eY+2+65, sX+w-17, eY+2+10+65, tocolor(255, 255, 255), 0.5, FONT, "left", "center")
		
	else
		dxDrawRectangle(sX, eY+2, w, 90, tocolor(0, 0, 0, 200))
		
		dxDrawText("Kraftstoff", sX+17, eY+2+10, sX+w-17, eY+2+10+15, tocolor(255, 255, 255), 0.5, FONT, "left", "center")
		dxDrawText("Höchstgeschwindigkeit", sX+17, eY+2+40, sX+w-17, eY+2+10+40, tocolor(255, 255, 255), 0.5, FONT, "left", "center")
		dxDrawText("0 - 100 km/h", sX+17, eY+2+65, sX+w-17, eY+2+10+65, tocolor(255, 255, 255), 0.5, FONT, "left", "center")
		
		local typ = getOriginalHandling(vehicleTable[currentVehicle].id)["engineType"]
		if (typ == "petrol") then
			typ = "Super"
		elseif (typ == "diesel") then
			typ = "Diesel"
		else
			typ = "Elektro"
		end
		
		local speed = "-"
		local secs	= "-"
		if (type(vehSpeeds[(vehicleTable[currentVehicle].id)]) == "table") then
			speed = math.ceil(vehSpeeds[(vehicleTable[currentVehicle].id)].maxSpeed).." km/h"
			secs = math.round((vehSpeeds[(vehicleTable[currentVehicle].id)].nullHundert/1000), 2, "ceil").." s"
		end
		
		dxDrawText(typ, sX+17, eY+2+10, sX+w-17, eY+2+10+15, tocolor(255, 255, 255), 0.5, FONT, "right", "center")
		dxDrawText(speed, sX+17, eY+2+40, sX+w-17, eY+2+10+40, tocolor(255, 255, 255), 0.5, FONT, "right", "center")
		dxDrawText(secs, sX+17, eY+2+65, sX+w-17, eY+2+10+65, tocolor(255, 255, 255), 0.5, FONT, "right", "center")
	end
end

local closed = false
local function carShopClose()
	if (closed ~= false) then return end
	closed = true
	
	firstSwitch = true
	freezeProductList(2000)
	fadeCamera(false, 1, 0, 0, 0)
	removeEventHandler("onClientRender", root, renderInfos)
	destroyProductSelect()
	setTimer(function()
		triggerServerEvent("toggleGhostMode", localPlayer, localPlayer, false)
		smoothDestroy()
		setCameraTarget(localPlayer, localPlayer)
		toggleAllControls(true, true, true)
		fadeCamera(true)
		closed = false
	end, 1000, 1)
end
local function carShopBuy(nr)
	carShopClose()
	setTimer(function()
		triggerServerEvent("carshopBuyVehicle", localPlayer, currentCarshop, vehicleTable[currentVehicle].realID)
	end, 1000, 1)
end

local function carShopStart(cars, shopTitle, shopID, shopLogo, _usedCars)
	vehicleTable = {}
	currentCarshop = shopID
	currentVehicle = 1
	usedCars = _usedCars
	for i, arr in pairs(cars) do
		if (arr.id ~= nil) then
			table.insert(vehicleTable, tableMerge(arr, {title=getVehicleNameFromModel(arr.id), realID=i}))
		end
	end
	
	toggleAllControls(false, true, true)
	
	fadeCamera(false, 1, 0, 0, 0)
	setTimer(function()
		fadeCamera(true)
		setMaxProductListEntries(5)
		displayProductSelect(shopTitle, vehicleTable, carShopSwitch, carShopBuy, carShopClose, shopLogo)
		addEventHandler("onClientRender", root, renderInfos)
	end, 1500, 1)
end
addEvent("carShopHello", true)
addEventHandler("carShopHello", root, carShopStart)



local function carSellHello(shopTitle, price, shopID)
	local window	= dxWindow:new(shopTitle, nil, nil, 350, 210, nil, nil, nil, nil, nil, true, function() triggerServerEvent("toggleGhostMode", localPlayer, getPedOccupiedVehicle(localPlayer), false) end)
	local infoTxt	= dxText:new(10, 5, 330, 50, "Willkommen bei "..shopTitle.."!\nHier kannst Du deine Fahrzeuge verkaufen.\n\nFür deine(n) "..getVehicleName(getPedOccupiedVehicle(localPlayer)).." inklusive Tunings\nbiete ich dir "..setDotsInNumber(price).." $!", window, "center", 1, 'exo-10', nil, false)
	
	local function buyIt()
		fadeCamera(false, 1, 0, 0, 0)
		window:close()
		setTimer(function()
			triggerServerEvent("carshopSellVehicle", localPlayer, shopID)
			fadeCamera(true)
		end, 1000, 1)
	end
	local buyBtn	= dxButton:new(50, 110, 250, 40, "Fahrzeug für "..setDotsInNumber(price).." $ verkaufen", window, buyIt, nil, nil, 1)
end
addEvent("carSellHello", true)
addEventHandler("carSellHello", root, carSellHello)

--[[
local renderAreas = {
	createColRectangle(1400, -1725, 200, 225), -- Stadpark + Rathaus
}
addEventHandler("onClientElementStreamIn", root, function()
	local ok = false
	for k, v in pairs(renderAreas) do
		ok = isElementWithinColShape(localPlayer, v)
		if (ok) then break end
	end
	
	setElementStreamable(source, false)
	outputChatBox("STREAMING: ALWAYS")
end)

addEventHandler("onClientElementStreamOut", root, function()
	local ok = false
	for k, v in pairs(renderAreas) do
		ok = isElementWithinColShape(localPlayer, v)
		if (ok) then break end
	end
	
	setElementStreamable(source, true)
	outputChatBox("STREAMING: RESET")
end)
]]













--[[
loadstring('for i, v in ipairs(getElementsByType("object")) do id = getElementModel(v); if (id==3964 or id==3965 or id==3966 or id==9560 or id==10389 or id==9901 or id==9950 or id==8397) then x,y,z=getElementPosition(v); rx,ry,rz=getElementRotation(v); lowobject=createObject (id,x,y,z,rx,ry,rz,true); engineSetModelLODDistance(id, 170); setElementStreamable(lowobject, false); end end')()


loadstring('for i, v in ipairs(getElementsByType("object")) do id = getElementModel(v); x,y,z=getElementPosition(v); rx,ry,rz=getElementRotation(v); lowobject=createObject (id,x,y,z,rx,ry,rz,true); local lodis=50; if (id==3964 or id==3965 or id==3966 or id==9560 or id==10389 or id==9901 or id==9950 or id==8397) then lodis=250; end if (id==708 or id==620 or id==700 or id==709 or id==708 or id==6965 or id==4206 or id==9833 or id==10023 or id==10762 or id==9915 or id==7423 or id==7665) then lodis=100; end engineSetModelLODDistance(id, lodis); setElementStreamable(lowobject, false); end')()



loadstring('for i, v in ipairs(getElementsByType("object")) do id = getElementModel(v); x,y,z=getElementPosition(v); rx,ry,rz=getElementRotation(v); local lodis=false; if (id==3964 or id==3965 or id==3966 or id==9560 or id==10389 or id==9901 or id==9950 or id==8397) then lodis=250; end if (id==708 or id==620 or id==700 or id==709 or id==708 or id==6965 or id==4206 or id==9833 or id==10023 or id==10762 or id==9915 or id==7423 or id==7665) then lodis=100; end if (lodis~=false) then lowobject=createObject (id,x,y,z,rx,ry,rz,true); engineSetModelLODDistance(id, lodis); setElementStreamable(lowobject, false); end end')()



loadstring('for i, v in ipairs(getElementsByType("object")) do id = getElementModel(v); x,y,z=getElementPosition(v); rx,ry,rz=getElementRotation(v); if (id==2757 or id==3529 or id==1965 or id==1649 or id==3964) then lodis=125; lowobject=createObject (id,x,y,z,rx,ry,rz,true); engineSetModelLODDistance(id, lodis); setElementStreamable(lowobject, false); end end')()


loadstring('for i, v in ipairs(getElementsByType("object")) do id = getElementModel(v); x,y,z=getElementPosition(v); rx,ry,rz=getElementRotation(v); lodis=125; lowobject=createObject(id,x,y,z,rx,ry,rz,true); engineSetModelLODDistance(id, lodis); setElementStreamable(lowobject, false); end')()


2757
3529
1965
1649
3964

--]]